<!doctype html>
<!--[if lt IE 8 ]><html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]><html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]><html lang="en" class="ie9"> <![endif]-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0,minimum-scale=1.0,width=device-width,user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>Sleep Diary - Sleep Details</title>

    <!-- main JS libs 
<script src="js/libs/jquery-1.10.2.min.js"></script>
<script src="js/libs/jquery-ui.min.js"></script>
<script src="js/libs/bootstrap.min.js"></script> -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107411902-1"></script>
<script>

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107411902-1');

</script>
    <!-- Style CSS -->
    <!--<link href="css/bootstrap.css" media="screen" rel="stylesheet">-->
    <link href="style.css" media="screen" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/datedropper.min.css" rel="stylesheet">
    <link href="css/timepicki.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet"><link rel="stylesheet" href="css/jquery-ui.css">


    <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
    <script src="js/jquery.min.js"></script>
    <script>

      //Added hide target modal
      function hide(target) {
        document.getElementById(target).style.display = 'none';
      }

      function timeNow(i) {
        var d = new Date(),
            h = (d.getHours()<10?'':'') + d.getHours(),
            m = (d.getMinutes()<10?'0':'') + d.getMinutes();
        var ampm = h >= 12 ? 'PM' : 'AM';
        if (h>12){h= h-12;}
        h = (h<10?'0':'') + h;
        i.value = h + ':' + m + ' ' + ampm;;
      }

    </script>




    <!--[if lt IE 9]><script src="js/respond.min.js"></script><![endif]-->
  </head>

  <body>

    <!--Begin Add sleep modal--->
    <div>

      <div id="popupmodal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog modal-lg">
          <form class="modal-content form-horizontal" id="frmCadastre">
            <div class="modal-header">
              <button type="button" class="close" data-toggle="modal" data-target="#confirm-delete" aria-label="Close"><span aria-hidden="false">&times;</span></button>
              <h4 class="modal-title" id="myModalLabel">ADD/EDIT SLEEP</h4>
              Use this diary to store/edit your sleep data.  To begin you will need to start with entering information leading up to last nightâ€™s sleep.  
            </div>
            <div class="modal-body">
              <ul class="nav nav-tabs">
                <li class="active">
                  <a data-toggle="tab" href="#menu1" title="Nap or Doze tab">
                    <img src="images/nap_tab_icon.png" alt="Nap or Doze icon" class="tab-icon"><br>Nap or Doze
                  </a>
                </li>
                <li>
                  <a data-toggle="tab" href="#datetime" title="Goint to bed tab">
                    <img src="images/going_to_bed_icon.png" alt="Going to bed icon" class="tab-icon">
                    <br>Going to sleep
                  </a>
                </li>						    
                <li><a data-toggle="tab" href="#menu2" title="During Sleep tab"><img src="images/during_sleep_icon.png" alt="During Sleep icon" class="tab-icon"><br>During Sleep</a></li>
                <li><a data-toggle="tab" href="#menu3" title="Waking Up tab"><img src="images/waking_up_icon.png" alt="Waking Up icon" class="tab-icon"><br>Waking Up</a></li>
                <li><a data-toggle="tab" href="#menu4" id="loadRange"  title="Sleep Quality tab"><img src="images/sleep_quality_icon.png" alt="Sleep Quality icon" class="tab-icon"><br>Sleep Quality</a></li>
              </ul>
              <div class="tab-content">						  	
                <!-- //tab-1 -->
                <div id="menu1" class="tab-pane fade in active mt20">
                  <div class="form-group has-default has-feedback">                                

                    <label for="yesno2" class="col-sm-6 control-label">Did you nap or doze yesterday?</label>
                    <div class="col-sm-6">                                 

                      <div class="onoffswitch">



                        <label class="radio-inline">
                          <input title="Yes, I did nap or doze yesterday" type="radio" data-yesno="#ddtab2" id="yesno2" name="onoffswitch" checked="">Yes
                        </label>
                        <label class="radio-inline">
                          <input title="No, I did not nap or doze yesterday" type="radio" id="yesno_no" name="onoffswitch" onClick="hide('ddtab2')" checked="">No
                        </label>







                      </div>
                    </div>
                  </div>
                  <div class="form-group collapse" id="ddtab2">
                    <label for="dropdown2" class="col-sm-6 control-label">In total minutes, how long did you nap or doze?</label>
                    <div class="col-sm-5">
                      <select class="form-control" id="dropdown2" data-calculate="#drop1Adddrop2" value="0" title="In total minutes, select how long you napped or dozed yesterday.">
                        <option value="0">0 Minutes</option>
                        <option value="5">05 Minutes</option>
                        <option value="10">10 Minutes</option>
                        <option value="20">20 Minutes</option>
                        <option value="30">30 Minutes</option>
                        <option value="40">40 Minutes</option>
                        <option value="50">50 Minutes</option>
                        <option value="60">1 Hour</option>
                        <option value="70">1 Hour 10 minutes</option>
                        <option value="80">1 Hour 20 minutes</option>
                        <option value="90">1 Hour 30 minutes</option>
                        <option value="100">1 Hour 40 minutes</option>
                        <option value="110">1 Hour 50 minutes</option>
                        <option value="120">2 Hours</option>
                        <option value="130">2 Hours 10 minutes</option>
                        <option value="140">2 Hours 20 minutes</option>
                        <option value="150">2 Hours 30 minutes</option>
                        <option value="160">2 Hours 40 minutes</option>
                        <option value="170">2 Hours 50 minutes</option>
                        <option value="180">3 Hours</option>
                        <option value="190">3 Hours 10 minutes</option>
                        <option value="200">3 Hours 20 minutes</option>
                        <option value="210">3 Hours 30 minutes</option>
                        <option value="220">3 Hours 40 minutes</option>
                        <option value="230">3 Hours 50 minutes</option>
                        <option value="240">4 Hours</option>
                        <option value="250">4 Hours 10 minutes</option>
                        <option value="260">4 Hours 20 minutes</option>
                        <option value="270">4 Hours 30 minutes</option>
                        <option value="280">4 Hours 40 minutes</option>
                        <option value="290">4 Hours 50 minutes</option>
                        <option value="300">5 Hours</option>

                      </select>								    	
                    </div>
                    <div class="col-sm-5 mt5"></div>
                  </div>

                  <hr>
                  <div class="form-group">
                    <div class="pull-left"></div>
                    <div class="pull-right">

                      <button title="Button - Move to Going to Sleep tab"  type="button" class="btn btn-primary" data-nextprev="#datetime">Going to Sleep <span class="glyphicon glyphicon-chevron-right"></span></button>
                    </div>								  	
                  </div>
                </div>

                <!-- //tab-2 -->
                <div id="datetime" class="tab-pane fade  mt20">
                  <div class="form-group has-default has-feedback">
                    <label for="datefield" class="col-sm-6 control-label">Date (MM/DD/YYYY) :<strong class="required-indicator"></strong></label>
                    <div class="col-sm-5">
                      <input type="text" class="form-control date-box" id="datefield" placeholder="Date" title="Enter Date (MM/DD/YYYY)" readonly="true">
                      <span class="glyphicon glyphicon-calendar form-control-feedback"></span>
                      <div class="alert-msg" id="daterequired">This field is required.</div>
                    </div>
                  </div>
                  <div class="form-group has-default has-feedback">
                    <label for="timefield" class="col-sm-6 control-label">What time did you get into bed yesterday?</label>
                    <div class="col-sm-5">
                      <input type="search" name="time1" value="10:00 PM" class="form-control time-box" id="timefield" placeholder="Time" title="Enter time you got in bed" readonly="true">
                      <a onClick="timeNow(timefield)" href="#" title="Use Current Time" class="time_now">Use Current Time</a><span class="glyphicon glyphicon-time form-control-feedback"></span>
                    </div>
                    <div class="col-sm-5 mt5"></div>
                  </div>
                  <div class="form-group has-default has-feedback">
                    <label for="timefield2" class="col-sm-6 control-label">What time did you try to go to sleep?</label>
                    <div class="col-sm-5">
                      <input type="search" name="time2" class="form-control time-box" value="11:00 PM" id="timefield2" placeholder="Time" title="Enter time you tried to go to sleep" readonly="true">
                      <a onClick="timeNow(timefield2)" href="#" title="Use Current Time" class="time_now">Use Current Time</a><span class="glyphicon glyphicon-time form-control-feedback"></span>
                    </div>
                    <div class="col-sm-5 mt5"></div>
                  </div>
                  <div class="form-group has-default has-feedback">
                    <label for="dropdown2" class="col-sm-6 control-label">How long did it actually take you to fall asleep?</label>
                    <div class="col-sm-5">
                      <select class="form-control" id="dropdown" data-calculate="#drop1Adddrop" value="0" title="Select how long it actually took you to fall asleep">
                        <option value="0" selected>0 Minutes</option>
                        <option value="5">05 Minutes</option>
                        <option value="10">10 Minutes</option>
                        <option value="20">20 Minutes</option>
                        <option value="30">30 Minutes</option>
                        <option value="40">40 Minutes</option>
                        <option value="50">50 Minutes</option>
                        <option value="60">1 Hour</option>
                        <option value="70">1 Hour 10 minutes</option>
                        <option value="80">1 Hour 20 minutes</option>
                        <option value="90">1 Hour 30 minutes</option>
                        <option value="100">1 Hour 40 minutes</option>
                        <option value="110">1 Hour 50 minutes</option>
                        <option value="120">2 Hours</option>
                        <option value="130">2 Hours 10 minutes</option>
                        <option value="140">2 Hours 20 minutes</option>
                        <option value="150">2 Hours 30 minutes</option>
                        <option value="160">2 Hours 40 minutes</option>
                        <option value="170">2 Hours 50 minutes</option>
                        <option value="180">3 Hours</option>
                        <option value="190">3 Hours 10 minutes</option>
                        <option value="200">3 Hours 20 minutes</option>
                        <option value="210">3 Hours 30 minutes</option>
                        <option value="220">3 Hours 40 minutes</option>
                        <option value="230">3 Hours 50 minutes</option>
                        <option value="240">4 Hours</option>
                        <option value="250">4 Hours 10 minutes</option>
                        <option value="260">4 Hours 20 minutes</option>
                        <option value="270">4 Hours 30 minutes</option>
                        <option value="280">4 Hours 40 minutes</option>
                        <option value="290">4 Hours 50 minutes</option>
                        <option value="300">5 Hours</option>
                      </select>

                    </div>
                    <div class="col-sm-5 mt5"></div>
                  </div>
                  <hr>
                  <div class="form-group">
                    <div class="pull-left">
                      <button title="Button - Move back to Nap or Dozing tab" type="button" class="btn btn-primary" data-nextprev="#menu1"><span class="glyphicon glyphicon-chevron-left"></span> Nap or Dozing</button>
                    </div>
                    <div id="duplicateWarning" class="col-xs-4 text-left mt5"></div>
                    <div class="pull-right">
                      <button title="Button - Move to During Sleep tab" type="button" class="btn btn-primary" data-nextprev="#menu2">During Sleep <span class="glyphicon glyphicon-chevron-right"></span></button>
                    </div>
                  </div>
                </div>



                <!-- //tab-3 -->
                <div id="menu2" class="tab-pane fade mt20">


                  <!-- ************Adding new hidden modal ************ -->

                  <div class="form-group has-default has-feedback">                                

                    <label for="yesno3" class="col-sm-6 control-label">Did you wake up during the night?</label>
                    <div class="col-sm-6">                                 

                      <div class="onoffswitch">

                        <label class="radio-inline">
                          <input title="Yes, I woke up during the night" type="radio" data-yesno="#ddtab3" id="yesno3" name="onoffswitch3" checked="">Yes
                        </label>
                        <label class="radio-inline">
                          <input title="No, I did not wake up during the night" type="radio" id="yesno3_no" name="onoffswitch3" onClick="hide('ddtab3')" checked="">No
                        </label>

                      </div></div></div>

                  <div class="form-group collapse" id="ddtab3">
                    <div class="row">
                      <label for="dropdown3" class="col-sm-6 control-label">How many times did you wake up during the night?</label>
                      <div class="col-sm-5" >
                        <select class="form-control" id="dropdown3" value="0" title="Select the number of times you work up during the night">
                          <option value="0">0</option>
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                          <option value="6">6</option>
                        </select>
                      </div>
                      <div class="col-sm-5 mt5"></div>
                    </div>


                    <div class="row">
                      <label for="dropdown4" class="col-sm-6 control-label">In total, how long did these awakening last?</label>
                      <div class="col-sm-5">
                        <select class="form-control" id="dropdown4" value="0" title="In total, how long did these awakening last?">
                          <option value="0">0 Minutes</option>
                          <option value="5">05 Minutes</option>
                          <option value="10">10 Minutes</option>
                          <option value="20">20 Minutes</option>
                          <option value="30">30 Minutes</option>
                          <option value="40">40 Minutes</option>
                          <option value="50">50 Minutes</option>
                          <option value="60">1 Hour</option>
                          <option value="70">1 Hour 10 minutes</option>
                          <option value="80">1 Hour 20 minutes</option>
                          <option value="90">1 Hour 30 minutes</option>
                          <option value="100">1 Hour 40 minutes</option>
                          <option value="110">1 Hour 50 minutes</option>
                          <option value="120">2 Hours</option>
                          <option value="130">2 Hours 10 minutes</option>
                          <option value="140">2 Hours 20 minutes</option>
                          <option value="150">2 Hours 30 minutes</option>
                          <option value="160">2 Hours 40 minutes</option>
                          <option value="170">2 Hours 50 minutes</option>
                          <option value="180">3 Hours</option>
                          <option value="190">3 Hours 10 minutes</option>
                          <option value="200">3 Hours 20 minutes</option>
                          <option value="210">3 Hours 30 minutes</option>
                          <option value="220">3 Hours 40 minutes</option>
                          <option value="230">3 Hours 50 minutes</option>
                          <option value="240">4 Hours</option>
                          <option value="250">4 Hours 10 minutes</option>
                          <option value="260">4 Hours 20 minutes</option>
                          <option value="270">4 Hours 30 minutes</option>
                          <option value="280">4 Hours 40 minutes</option>
                          <option value="290">4 Hours 50 minutes</option>
                          <option value="300">5 Hours</option>
                        </select>
                      </div>
                      <div class="col-sm-5 mt5"></div>
                    </div>

                  </div>
                  <!-- ************END Adding new hidden modal ************ -->




                  <hr>
                  <div class="form-group">
                    <div class="pull-left">
                      <button title="Button - Move back to Going to Sleep tab" type="button" class="btn btn-primary" data-nextprev="#datetime"><span class="glyphicon glyphicon-chevron-left"></span> Going to Sleep</button>
                    </div>
                    <div class="pull-right">
                      <button title="Button - Move to Waking Up tab" type="button" class="btn btn-primary" data-nextprev="#menu3">Waking Up <span class="glyphicon glyphicon-chevron-right"></span></button>
                    </div>
                  </div>
                </div>

                <!-- //tab-4 -->
                <div id="menu3" class="tab-pane fade mt20">
                  <div class="form-group has-default has-feedback">
                    <label for="timefield3" class="col-sm-6 control-label">What time was your final awakening?</label>
                    <div class="col-sm-5">
                      <input type="search" value="06:00 AM" class="form-control time-box" id="timefield3" placeholder="Time" title="Select the time of your final awakening" readonly="true">
                      <a onClick="timeNow(timefield3)" href="#" title="Use Current Time" class="time_now">Use Current Time</a><span class="glyphicon glyphicon-time form-control-feedback"></span>
                    </div>
                    <div class="col-sm-5 mt5"></div>
                  </div>
                  <div class="form-group has-default has-feedback">
                    <label for="timefield4" class="col-sm-6 control-label">When did you get out of bed to start your day?</label>
                    <div class="col-sm-5">
                      <input type="search" value="07:00 AM" class="form-control time-box" id="timefield4" placeholder="Time" title="Select the time you got out of bed to start your day" readonly="true">
                      <a onClick="timeNow(timefield4)" href="#" title="Use Current Time" class="time_now">Use Current Time</a><span class="glyphicon glyphicon-time form-control-feedback"></span>
                    </div>
                    <div class="col-sm-5 mt5"></div>
                  </div>
                  <div class="form-group has-default has-feedback">
                    <label for="yesno4" class="col-sm-6 control-label">Did you wakeup earlier than desired?</label>
                    <div class="col-sm-5">
                      <div class="onoffswitch">

                        <label class="radio-inline">
                          <input title="Yes, I did wakeup earlier than desired." type="radio" data-yesno="#ddtab4" id="yesno4" name="onoffswitch4" checked="">Yes
                        </label>
                        <label class="radio-inline">
                          <input title="No, I did not wakeup earlier than desired."type="radio" id="yesno4_no" name="onoffswitch4" onClick="hide('ddtab4')" checked="">No
                        </label>


                      </div>
                    </div>
                  </div>
                  <div class="form-group collapse" id="ddtab4">
                    <label for="dropdown5" class="col-sm-6 control-label">How much earlier?</label>
                    <div class="col-sm-5">
                      <select class="form-control" id="dropdown5" title="Select how much earlier you woke up">
                        <option value="0" selected>0 Minutes</option>
                        <option value="5">05 Minutes</option>
                        <option value="10">10 Minutes</option>
                        <option value="20">20 Minutes</option>
                        <option value="30">30 Minutes</option>
                        <option value="40">40 Minutes</option>
                        <option value="50">50 Minutes</option>
                        <option value="60">1 Hour</option>
                        <option value="70">1 Hour 10 minutes</option>
                        <option value="80">1 Hour 20 minutes</option>
                        <option value="90">1 Hour 30 minutes</option>
                        <option value="100">1 Hour 40 minutes</option>
                        <option value="110">1 Hour 50 minutes</option>
                        <option value="120">2 Hours</option>
                        <option value="130">2 Hours 10 minutes</option>
                        <option value="140">2 Hours 20 minutes</option>
                        <option value="150">2 Hours 30 minutes</option>
                        <option value="160">2 Hours 40 minutes</option>
                        <option value="170">2 Hours 50 minutes</option>
                        <option value="180">3 Hours</option>
                        <option value="190">3 Hours 10 minutes</option>
                        <option value="200">3 Hours 20 minutes</option>
                        <option value="210">3 Hours 30 minutes</option>
                        <option value="220">3 Hours 40 minutes</option>
                        <option value="230">3 Hours 50 minutes</option>
                        <option value="240">4 Hours</option>
                        <option value="250">4 Hours 10 minutes</option>
                        <option value="260">4 Hours 20 minutes</option>
                        <option value="270">4 Hours 30 minutes</option>
                        <option value="280">4 Hours 40 minutes</option>
                        <option value="290">4 Hours 50 minutes</option>
                        <option value="300">5 Hours</option>
                      </select>
                    </div>
                  </div>

                  <hr>
                  <div class="form-group">
                    <div class="pull-left">
                      <button title="Button - Move back to During Sleep tab" type="button" class="btn btn-primary" data-nextprev="#menu2"><span class="glyphicon glyphicon-chevron-left"></span> During Sleep</button>
                    </div>
                    <div class="pull-right">
                      <button  title="Button - Move to Sleep Quality tab" type="button" class="btn btn-primary" data-nextprev="#menu4">Sleep Quality <span class="glyphicon glyphicon-chevron-right"></span></button>
                    </div>
                  </div>
                </div>

              <!-- //tab-5 -->
                <div id="menu4" class="tab-pane fade">
                  <div class="form-group">

                    <!-- Assistive Technology -->
                    <div id="sleepQualityAT">
                      <div class="col-sm-10 col-sm-offset-1">
                        <h3>How would you rate your sleep quality?</h3>
                        <div class="col-sm-2 col-sm-push-4">
                          <select class="form-control" id="sleepQuality" value="3" title="How would you rate your sleep quality?">
                            <option value="0">Very Poor</option>
                            <option value="2.5">Poor</option>
                            <option value="5">Fair</option>
                            <option value="7.5">Good</option>
                            <option value="10">Very Good</option>
                          </select>
                        </div>
                      </div>
                    </div>

                    <div id="sleepQualitySlider">
                      <input type="number" name="Sleep Quality" title="How would you rate your sleep quality?" class="opacity0" value="5" id="rangeSlide">
                      <div class="col-sm-10 col-sm-offset-1">
                        <h3>How would you rate your sleep quality?</h3>

                        <!-- //start slider -->
                        <div class="range-holder">
                          <div id="pr-slider" class="dragdealer">

                            <div class="stripe">
                              <div class="handle">
                                <div class="infobox">
                                  <div class="titlebar">
                                    <span id="plan-holder"></span> <span id="device-holder"></span>
                                  </div>
                                  <div class="innerbox">                      
                                    <div class="info-price"></div>
                                  </div>
                                </div>  
                                <div class="square">
                                  <span class="value"></span>
                                  <span class="menu-line"></span>
                                  <span class="menu-line"></span>
                                  <span class="menu-line"></span>
                                </div>  
                              </div>
                            </div>
                          </div>
                          <div class="num-steps" >
                            <span class="stepz stepp0"><br /><img src="images/sleep0.png" alt="sad droopy eyes with sad face" width="30px"></span>
                            <!-- <span class="stepz stepp1"><br /><img src="images/sleep0.png" alt="sad droopy eyes with sad face" width="30px"></span> -->
                            <span class="stepz stepp2"><br /><img src="images/sleep3.png" alt="wide-eyed with straight mouth" width="30px"></span>
                            <!-- <span class="stepz stepp3"><br /><img src="images/sleep3.png" alt="wide-eyed with straight mouth" width="30px"></span> -->
                            <!-- <span class="stepz stepp4"></span> -->
                            <span class="stepz stepp5"><br /><img src="images/sleep5.png" alt="briight-eyed with smiley face" width="30px"></span>
                            <!-- <span class="stepz stepp6"></span> -->
                            <!-- <span class="stepz stepp7"><br /><img src="images/sleep7.png" alt="a winking smiley face" width="30px"></span> -->
                            <span class="stepz stepp8"><br /><img src="images/sleep7.png" alt="a winking smiley face" width="30px"></span>
                            <!-- <span class="stepz stepp9"><br /><img src="images/sleep10.png" alt="bright-eyed with huge smile" width="30px"> </span> -->
                            <span class="stepz stepp10"><br /><img src="images/sleep10.png" alt="bright-eyed with huge smile" width="30px"> </span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- //end slider -->
                  </div>

                  <hr>
                  <div class="form-group">
                    <div class="col-xs-6 text-left">
                      <button title="Button - Move back to Waking Up tab" type="button" class="btn btn-primary" data-nextprev="#menu3"><span class="glyphicon glyphicon-chevron-left"></span> Waking Up</button>
                    </div>
                    <div class="pull-right"></div>
                  </div>
                </div>
              </div>

              <hr>


              <input type="hidden" name="" id="datapointH">

              <input type="hidden" name="" id="datapointI">

              <input type="hidden" name="" id="datapointJ">

              <input type="hidden" name="" id="datapointK">

              <input type="hidden" name="" id="datapointL">

              <input type="hidden" name="" id="datapointM">

              <input type="hidden" name="" id="datapointZ">



              <div class="form-group">
                <div class="col-sm-offset-4 col-sm-6">
                  <button type="button" class="btn btn-success active" id="btnSave" title="Save sleep data">&nbsp;&nbsp;Save&nbsp;&nbsp;<span class="glyphicon glyphicon-floppy-saved"></span>&nbsp;</button>
                  <button type="button" class="btn btn-default" data-toggle="modal" data-target="#confirm-delete" title="Close Add/Edit Sleep window">Close</button>
                </div>
              </div>
            </div>
          </form>
        </div>

      </div>     



      <!-- Confirmation delete modal -->


      <div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog">
          <div class="modal-content">

            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="false">&times;</button>
              <h4 class="modal-title" id="Confirm Exit Window">Confirm Exit</h4>
            </div>

            <div class="modal-body">
              <p>You are about the exit without saving your sleep data.</p>
              <p>Do you want to proceed?</p>

            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" title="Cancel - Close exit window" >Cancel</button>
              <a class="btn btn-danger btn-ok" href="sleepinfo.html" title="Proceed with saving">Proceed without saving</a>
            </div>
          </div>
        </div>
      </div>

      <!-- End delete mdal -->


      <!-- Duplicate date modal -->


      <div class="modal fade" id="confirm-edit-duplicate" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog">
          <div class="modal-content">

            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="false" title="Close duplicate data window">&times;</button>
              <h4 class="modal-title" id="Duplicate Data Window">Data already exists</h4>
            </div>

            <div class="modal-body">
              <p>You already have data entered for this date.</p>
              <p>Would you like to update it?</p>

            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" title="Ok- Update data for this date">OK</button>
            </div>
          </div>
        </div>
      </div>

      <!-- End Duplicate date modal -->


      <!-- Timefield error checking modal -->


      <div class="modal fade" id="timefield-warning" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog">
          <div class="modal-content">

            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="false" title="Close time error window">&times;</button>
              <h4 class="modal-title" id="Timefield Warning Window">Time error warning</h4>
            </div>

            <div class="modal-body">
              <p>Times entered appear to be far apart.</p>
              <p>Please double check the entries to make sure they are correct.</p>
            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" title="Ok- Verify times are correct">OK</button>
            </div>
          </div>
        </div>
      </div>

      <!-- End Timefield error checking modal -->



      <!--End Add sleep modal --->




      <div class="body-wrap">
        <div class="content">
          <!--container-->
          <div class="container">



            <div class="row hidden-xs">
              <!-- Skip to Main Content -->
              <div id="skip-link" class="col-xs-6">
                <a class="element-invisible element-focusable" href="#webapp_home" tabindex="1">Skip to main content</a><span class="sr-only">Skip to main content></span>
              </div>  

              <!-- ASSISTIVE TECHNOLOGY -->
              <div id="AT" class="hidden-xs col-sm-6 pull-right">
                <span id="atSpan" tabindex="2" >
                  <input accesskey="a" type="checkbox" id="ATbox" name="ATbox" value="y" />
                  <label for="ATbox">ASSISTIVE TECHNOLOGY</label>
                </span>
              </div>
            </div>


            <!-- row -->
            <div class="row">
              <div class="col-sm-12">
                <!-- Website Menu -->
                <ul class="menu boxed clearfix">
                  <li aria-selected="false"><a href="../index.html" title="Navigation menu tab - Home"><i class="menu-icon menu-icon-1"></i>Home</a></li>
                  <li aria-selected="false">
                    <a title="Add/Edit Sleep menu -- Opens dialog window to enter or edit sleep data" href="#" id="addentry" data-target="#popupmodal" data-toggle="modal"><i class="menu-icon menu-icon-9"></i>Add/Edit Sleep</a>

                  </li>
                  <li class="active" aria-selected="true">
                    <a href="sleepinfo.html" title="Navigation menu tab - My Sleep"><i class="menu-icon menu-icon-2"></i>My Sleep</a>

                  </li>
                  <li  aria-selected="false">
                    <a href="tools.html" title="Navigation menu tab - Tools"><i class="menu-icon menu-icon-5" ></i>Tools</a>

                  </li>

                  <li aria-selected="false"><a href="sleepinfo.html" class="downlaodcsv" data-export="export" title="Navigation menu tab - Share Sleep Data"><i class="menu-icon menu-icon-6"></i>Share Sleep Data</a></li>

                </ul>
                <!--/ Website Menu -->
              </div>
            </div>
            <!--/ row -->

            <!-- row -->
            <div class="row">
              <div class="col-sm-12">
                <!-- JumboTron -->
                <div class="jumbotron boxed">
                  <div class="jumbotron-left">
                    <div class="jumbotron-header">

                      <div class="jumbotron-image">
















                        <div class="panel panel-default" id="webapp_home">
                          <div class="panel-heading">
                            <div class="panel-title row">
              
                              <h2 class="panel-title col-md-6">
                                <br />
                                Detailed Sleep Information:
                                <br />
                                Assistive Technology (Press \ to enable)    
                              </h2>    
                              <div class="col-md-6">
                                <br />
                                <button id="singlDelete" class="btn btn-sm btn-danger btnDelete pull-right" data-toggle="tooltip" data-placement="bottom" title="Delete"><span class="glyphicon glyphicon-trash mr6"></span> Delete</button>
                                <button id="singlEdit" class="btn btn-sm btn-primary btnEdit pull-right mr6" data-toggle="tooltip" data-placement="bottom" title="Edit"><span class="glyphicon glyphicon-edit mr6"></span> Edit</button>
                              </div>
                            </div><br>
                        </div>
                        <div class="panel-body list-body">
                          <div class="row">
                            <div class="col-xs-8 " style="padding-bottom:15px" tabindex="0">Date:</div>
                            <div class="col-xs-4 " id="datetxt" tabindex="0">-</div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">
                            <div class="col-xs-8 " style="padding-bottom:5px" tabindex="0">What time did you get into bed?</div>
                            <div class="col-xs-4 " id="timetxt" tabindex="0">-</div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">
                            <div class="col-xs-8 "  style="padding-bottom:15px" tabindex="0">What time did you try to go to sleep?
                            </div>
                            <div class="col-xs-4 " id="timetxt2"tabindex="0">-</div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">
                            <div class="col-xs-8 " style="padding-bottom:5px" tabindex="0">How long did it actually take you to fall asleep?
                            </div>
                            <div class="col-xs-4 " id="dropdowntxt" tabindex="0">-</div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">
                            <div class="col-xs-8 " style="padding-bottom:5px" tabindex="0">In total how long did you nap or doze?
                            </div>
                            <div class="col-xs-4 " id="dropdowntxt2" tabindex="0">-</div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">
                            <div class="col-xs-8 " style="padding-bottom:5px" tabindex="0">How many times did you wake up during the night
                            </div>
                            <div class="col-xs-4 " id="dropdowntxt3" tabindex="0">-</div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">
                            <div class="col-xs-8 "  style="padding-bottom:15px" tabindex="0">In total, how long did these awakenings last?
                            </div>
                            <div class="col-xs-4 " id="dropdowntxt4" tabindex="0">-</div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">
                            <div class="col-xs-8 " style="padding-bottom:5px" tabindex="0">What time was your final awakening?</div>
                            <div class="col-xs-4 " id="timetxt3" tabindex="0">-</div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">
                            <div class="col-xs-8 " style="padding-bottom:5px" tabindex="0">When did you get out of bed to start your day?
                            </div>
                            <div class="col-xs-4 " id="timetxt4" tabindex="0">-</div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">
                            <div class="col-xs-8 " style="padding-bottom:5px" tabindex="0">How much earlier did you wake up than expected?
                            </div>
                            <div class="col-xs-4 " id="dropdowntxt5" tabindex="0">-</div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">
                            <div class="col-xs-8 " style="padding-bottom:5px" tabindex="0">Sleep Quality:</div>
                            <div class="col-xs-4 " id="rangeSlidetxt" tabindex="0">-</div>
                          </div>

                          <hr>
                          <div class="row">
                            <div class="col-xs-6 col-lg-5" style="padding-bottom:5px" tabindex="0"><h3>Calculated Results</h3></div>
                            <div class="col-xs-6 col-lg-4"></div>
                            <div class="hidden-xs col-lg-3"></div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-xs-6 col-lg-5"></div>
                            <div class="col-xs-6 col-lg-4"></div>
                            <div class="hidden-md col-lg-3" tabindex="0" style="white-space: nowrap;line-height: 20px">Goal</div>
                          </div>
                          <div class="row">
                            <div class="col-xs-6 col-lg-5" style="padding-bottom:5px" tabindex="0">Total time in bed trying to sleep</div>
                            <div class="col-xs-6 col-lg-4" id="calcHtxt" tabindex="0">-</div>
                            <div class="hidden-md col-lg-3" tabindex="0"></div>
                          </div>
                          <div class="table-divider col-xs-12 visible-xs"></div>
                          <div class="row">                   
                            <div class="col-xs-6 col-lg-5" style="padding-bottom:5px" tabindex="0">Pre-Sleep Time in Bed</div>
                            <div class="col-xs-6 col-lg-4" id="calcItxt" tabindex="0">-</div>
                            <div class="hidden-md col-lg-3" tabindex="0" style="white-space: nowrap;line-height: 20px">< 30&#8209;Minutes</div>
                            </div>
                            <div class="table-divider col-xs-12 visible-xs"></div>
                            <div class="row">                     
                              <div class="col-xs-6 col-lg-5" style="padding-bottom:5px" tabindex="0">Post-Sleep Time in Bed (Snooze Time)</div>
                              <div class="col-xs-6 col-lg-4" id="calcJtxt" tabindex="0">-</div>
                              <div class="hidden-md col-lg-3" tabindex="0" style="white-space: nowrap;line-height: 20px">~ 15&#8209;Minutes</div>
                            </div>
                            <div class="table-divider col-xs-12 visible-xs"></div>
                            <div class="row">                    
                              <div class="col-xs-6 col-lg-5" style="padding-bottom:5px" tabindex="0">Total Wake Time</div>
                              <div class="col-xs-6 col-lg-4" id="calcKtxt" tabindex="0">-</div>
                              <div class="hidden-md col-lg-3" tabindex="0"></div>
                            </div>
                            <div class="table-divider col-xs-12 visible-xs"></div>
                            <div class="row">                    
                              <div class="col-xs-6 col-lg-5" style="padding-bottom:5px" tabindex="0">Total Sleep Time</div>
                              <div class="col-xs-6 col-lg-4" id="calcLtxt" tabindex="0">-</div>
                              <div class="hidden-md col-lg-3" tabindex="0"></div>
                            </div>
                            <div class="table-divider col-xs-12 visible-xs"></div>
                            <div class="row">                    
                              <div class="col-xs-6 col-lg-5" style="padding-bottom:5px" tabindex="0">Total Sleep Time- Including Naps</div>
                              <div class="col-xs-6 col-lg-4" id="calcZtxt" tabindex="0">-</div>
                              <div class="hidden-md col-lg-3" tabindex="0"></div>
                            </div>
                            <div class="table-divider col-xs-12 visible-xs"></div>
                            <div class="row">                    
                              <div class="col-xs-6 col-lg-5" style="padding-bottom:5px" tabindex="0">Sleep Efficiency (M)</div>
                              <div class="col-xs-6 col-lg-4" id="calcMtxt" tabindex="0">-</div>
                              <div class="hidden-md col-lg-3" tabindex="0" style="white-space: nowrap;line-height: 20px">85%</div>
                            </div>










                            <hr>
                            <!--  <div class="row">
<div class="col-xs-5 col-md-6">Download History&nbsp;:</div>
<div class="col-xs-7 col-md-6" id="downloadHistorytxt">-</div>
</div>
<div class="row">
<div class="col-xs-5 col-md-6">Last Download&nbsp;:</div>
<div class="col-xs-7 col-md-6" id="lasDownloadtxt">-</div>
</div>
</div>
</div> -->

                            <label for="graphRange" class="col-sm-7 control-label">Number of Days to Display</label>
                            <div class="col-sm-5">
                              <select class="form-control" id="graphRange" value="7" title="Select the number of days of data to display">
                                <option value="7">7 Days</option>
                                <option value="14">14 Days </option>
                                <option value="30">30 Days</option>
                                <option value="90">90 Days</option>
                                <option value="All">All data</option>
                              </select>
                            </div>

                            <div class="notify"></div>

                            <div id="chartContainer1" style="height: 100%; width: 100%; pointer-events:none;">
                              <h3>Sleep Summary (Hours)</h3>
                              <canvas id="linechart1"></canvas>
                            </div>
                            <hr size="3">
                            <div id="chartContainer2" style="height: 100%; width: 100%; pointer-events:none;">
                              <h3>Sleep Efficiency (%)</h3>
                              <canvas id="linechart2"></canvas>
                            </div>  
                            <hr size="3"> 
                            <div id="chartContainer3" style="height: 100%; width: 100%; pointer-events:none;">
                              <h3>Falling Asleep</h3>
                              <canvas id="linechart3"></canvas>
                            </div> 
                            <hr size="3">  
                            <div id="chartContainer4" style="height: 100%; width: 100%; pointer-events:none;">
                              <h3>Total Minutes Awake in the Night</h3>
                              <canvas id="linechart4"></canvas>
                            </div>   

                            <!-- //End sleep table -->

                            <!-- Assistive Technology text table -->

                            <div>
                              <ul class="calendarlist mt0" id="list" style="overflow:hidden;"></ul>
                            </div>

                          </div>
                        </div>
                        <div class="post-item clearfix">

                        </div>

                      </div>
                    </div>
                  </div>
                  <div class="jumbotron-right"></div>
                  <!-- <div class="jumbotron-right">


                    <div class="widget-container widget-recent widget-recent-stories boxed green-line">
                      <div class="inner">
                        <h2 class="widget-title">Sleep Diary Links</h2>
                        <ul>
                          <li class="clearfix">
                            <a href="./graph.html" class="post-thumb"><img src="./images/graph_thumb.png" alt="Graphical Sleep Data" /></a>
                            <a href="./graph.html" class="post-title" alt"Graphical Sleep Data">Graphical Sleep Data</a>                                    <span class="post-desc">Visually review sleep calculation in graph format.</span>

                          </li>
                          <li class="clearfix">
                        <a href="../../../../index.html#01_03_007p" target="_blank" class="post-thumb"><img src="./images/sleep_calc_thumb.png" alt="Sleep Calculator (Opens in new window)" /></a>
                        <a href="../../../../index.html#01_03_007p" target="_blank" class="post-title">Pen & Paper Calculator</a>                                    <span class="post-desc">This will help teach you how to calculate your sleep patterns.</span>

                      </li>
                      <li class="clearfix">
                        <a href="../../../../index.html#01_03_006p" target="_blank" class="post-thumb"><img src="./images/FotoliaComp_82710879_pen_paper.jpg" alt="Pen & Paper Method (Opens in new window)" /></a>
                        <a href="../../../../index.html#01_03_006p" target="_blank" class="post-title">Pen & Paper Method</a>                                    <span class="post-desc">The Pen & Paper method will require you to hand write all of your sleep information.</span>

                      </li>
                          <li class="clearfix">
                            <a href="https://mobile.va.gov/app/cbt-i-coach" target="_blank" class="post-thumb"><img src="./images/cbti_thumb.png" alt="CBT-I Coach (Opens in new window)" /></a>
                            <a href="https://mobile.va.gov/app/cbt-i-coach" target="_blank" class="post-title">CBT-I Coach</a>                                    <span class="post-desc">CBT-i Coach is available for Apple/Android mobile devices</span>

                          </li>
                          <li class="clearfix">
                            <a href="http://www.veterantraining.va.gov/" target="_blank" class="post-thumb"><img src="./images/va_training_thumb.png" alt="Veteran Training (Opens in new window)" /></a>
                            <a href="http://www.veterantraining.va.gov/" target="_blank" class="post-title">Veteran Training</a>                                    <span class="post-desc">Veteran Training provides access to free, confidential and easy-to-access online training.</span>

                          </li>

                        </ul>

                      </div>
                    </div>


 -->



                  </div>                    <!--/ JumboTron -->
                </div>
              </div>
              <!--/ row -->


            </div>
          </div>
          <!--/ row -->
        </div>
        <!--/ container -->
      </div>
    </div>



    

    <script src="js/moment.js"></script>

    <script src="js/tableCsv.js"></script>
    <script src="js/bootstrap.min.js"></script><script src="js/jquery-ui.js"></script>
    <script type="text/javascript" src="js/datedropper.min.js"></script>
    <script type="text/javascript" src="js/timepicki.js"></script>

    <!-- //calculation -->
    <script type="text/javascript" src="js/calculation.js"></script>



    <script type="text/javascript">
      $(document).ready(function(){
        //find current date
        var currentdate = new Date();
        var monthz = currentdate.getMonth()+1;
        var dayz = currentdate.getDate();
        var output = ((''+monthz).length<2 ? '0' : '') + monthz + '/' +
            ((''+dayz).length<2 ? '0' : '') + dayz + '/' + currentdate.getFullYear();
        $('#datefield').val(output);

        $(document).on('blur click', '#datefield, body', function(){
          var datearray = [];
          $('tbody tr td:first-child').each(function(data, e){
            datearray.push($(e).text());
          });
          var dateval = $('#datefield').val();
          //if ($.inArray(dateval, datearray) > -1) {
          //		$('.alert-msg').html('Date is already exist in database').show();
          //  $('#btnSave').attr('disabled',true);
          //}
          //else{
          //$('.alert-msg').css('display','none');
          //$('#btnSave').removeAttr('disabled');
          //}
        });

        $('#timefield').timepicki({start_time: ["10", "00", "PM"]});
        $('#timefield2').timepicki({start_time: ["11", "00", "PM"]});
        $('#timefield3').timepicki({start_time: ["6", "00", "AM"]});
        $('#timefield4').timepicki({start_time: ["7", "00", "AM"]});
        $('.date-box, #dropdown').focus(function() {
          $('#timefield').blur();
          $('#timefield2').blur();
        });
        $('#timefield').focus(function() {
          $('#timefield2').blur();
        });
        $('#timefield2').focus(function() {
          $('#timefield').blur();
        });

        $('#graphRange').on('change', function () {
          drawGraph();
          populateTable();
          if (window.navChecked) {
            $('#chartContainer1').hide();
            $('#chartContainer2').hide();
            $('#chartContainer3').hide();
            $('#chartContainer4').hide();
            $('#list').show();
          } 
          else {
            $('#chartContainer1').show();
            $('#chartContainer2').show();
            $('#chartContainer3').show();
            $('#chartContainer4').show();
            $('#list').hide();
          }
        });
      });
    </script>


    <script type="text/javascript">
      $(document).ready(function(){
        // set values of downloaded date
        $('#currentDate').val(localStorage.getItem("downloadHistory"));

        $('#AT').on('change', ':checkbox', function () {
          if ($(this).is(':checked')) {
            $('#chartContainer1').hide();
            $('#chartContainer2').hide();
            $('#chartContainer3').hide();
            $('#chartContainer4').hide();
            populateTable();
            $('#list').show();
          } else {
            $('#chartContainer1').show();
            $('#chartContainer2').show();
            $('#chartContainer3').show();
            $('#chartContainer4').show();
            $('#list').hide();
          }
        });

        //slide change then values should be change.
        $('[data-rangeslide]').on('change mousemove', function(){
          var getdataid = $(this).data('rangeslide');
          var getvalue = $(this).val();
          $(getdataid).html(getvalue);
        });

        //yes-no check when page load
        $('[data-yesno]').each(function(){
          var getid = $(this).data('yesno');
          var check = $(this).prop('checked');
          if (check==true) {$(getid).show();}
          else{$(getid).hide();}
        })
        //yes-no check when choosen
        $('[data-yesno]').on('change', function(){
          var getid = $(this).data('yesno');
          var check = $(this).prop('checked');
          if (check==true) {$(getid).show();}
          else{$(getid).hide();}
        });

        // dropdown and dropdown-2 calculation
        $('[data-calculate]').on('change', function(){
          var getid = $(this).data('calculate');
          var selfVal = $(this).val();
          var clc = [];
          $('[data-calculate="'+getid+'"]').each(function(){
            clc.push($(this).val());
          });
          var checkVal1 = parseFloat(clc[0]);
          var checkVal2 = parseFloat(clc[1]);
          if (isNaN(checkVal1)) {
            if (isNaN(checkVal2)) {
              $(getid).val('');
            }
            else{
              $(getid).val(checkVal2);
            }
          }
          else{
            if (isNaN(checkVal2)) {
              $(getid).val(checkVal1);
            }
            else{
              var result = parseFloat(clc[0]) + parseFloat(clc[1]);
              $(getid).val(result);
            }
          }
        });
      });
    </script>

    <!--<script type="text/javascript">
$(document).ready(function(){
$('[data-nextprev]').on('click', function(){
var getval = $(this).data('nextprev');
if (getval = 'sleepinfo.html') {
console.log('nextprev is sleepinfo');
window.location.href = './sleepinfo.html';
$('#popupmodal').modal('hide'); 
}
else {
$('[href="'+getval+'"]').trigger('click');
}
});
});
</script-->


    <script type="text/javascript">
      $(document).ready(function(){
        $('[data-nextprev]').on('click', function(){
          var getval = $(this).data('nextprev');
          $('[href="'+getval+'"]').trigger('click');
        });
      });
    </script>

    <script src="js/Chart.bundle.min.js"></script>

    <script type="text/javascript">
      var startfrom = 0;
      var step = 7;

      $(document).ready(function(){
        // Handler for .ready() called.
        // When document is ready, draw graph.
        
        window.sortedDates = [];
        getSortedDates();
        drawGraph();
      });

      function getSortedDates() {
        var localStorageArray = [];
        var localStorageKeys = [];
        var localStorageMoments = [];
        if (localStorage.length > 0){
          for (i = 0; i < localStorage.length; i++) {
            var aarr = JSON.parse(localStorage.getItem(localStorage.key(i)));
            localStorageKeys[i] = localStorage.key(i);
            localStorageArray[i] = localStorage.getItem(localStorage.key(i));
            localStorageMoments[i] = moment(aarr.Moment);
          }
        }

        // sort date array
        localStorageMoments.sort(function(a,b){
          return a.diff(b);
        });

        for (i = 0; i < localStorageMoments.length; i++) {
          for (j = localStorageMoments.length - 1; j >= 0; j--) { 
            if (localStorageKeys[j] == localStorageMoments[i].format('MM/DD/YYYY')) {
              sortedDates[i] = JSON.parse(localStorageArray[j]);
            }
          }
        }
      }
    </script>

    <script>
      function drawGraph() {
        var dateary = [];
        var momentary = [];
        var datapointaryH = [];
        var datapointaryL = [];
        var datapointaryM = [];
        var datapointaryStd = [];
        var datapointaryTime2 = [];
        var datapointaryDropdown = [];
        var datapointaryTime = [];
        var datapointaryDropdown4 = [];

        var hash = window.location.hash.substr(1);
        var beginPoint = 0; // determine starting point to attempt to ensure as many data entries on graph as possible
        graphWidth = $('#graphRange').val();

        switch(graphWidth) {
          case '7':
            graphWidth = 7;
            break;
          case '14':
            graphWidth = 14;
            break;
          case '30':
            graphWidth = 30;
            break;
          case '90':
            graphWidth = 90;
            break;
          case 'All':
            graphWidth = 99999999;
            break;
          default:
            graphWidth = 7;
            break;
        }

        // console.log('graphWidth: ' + graphWidth);

        if ((localStorage.length - 1) < graphWidth) { // show as much data as is available
          beginPoint = 0;
        }
        else {
          var j = 0;
          for (i = localStorage.length - 1; i >= 0; i--) {
            if ((i < hash)) {
              if (hash - graphWidth >= 0) {
                beginPoint = i;
                j++;
                if (j >= graphWidth - 1) // check for number of entries displayed on graph/table based on dropdown
                  break;
              }
            }
          }
        }

        var date1Hi = 0;
        var dropdownHi = 0;
        var date2Hi = 0;
        var date1Lo = 0;
        var dropdownLo = 0;
        var date2Lo = 0;
        var firstTime = true;
        
        for (i = 0; i < localStorage.length; i++) {
          if ((i >= beginPoint) && (i < beginPoint + graphWidth) && (i <= hash)) {
            dateary.push(window.sortedDates[i].Date);
            var datapointHHours = parseFloat(parseFloat(window.sortedDates[i].datapointH / 60)).toFixed(1);
            datapointaryH.push(datapointHHours);
            var datapointLHours = parseFloat(parseFloat(window.sortedDates[i].datapointL / 60)).toFixed(1); 
            datapointaryL.push(datapointLHours);
            datapointaryM.push(window.sortedDates[i].datapointM);
            datapointaryStd.push(85);

            var date = moment(window.sortedDates[i].Date + window.sortedDates[i].Time2, 'MM/DD/YYYYHH:mm a');
            var date2 = moment(window.sortedDates[i].Date + window.sortedDates[i].Time, 'MM/DD/YYYYHH:mm a');
            var date1 = moment(date);

            var dropdown = date.add(window.sortedDates[i].Dropdown, 'm');

            var pushDate1 = date1.hours();
            var pushDropdown = dropdown.hours();
            var pushDate2 = date2.hours();

            if ((pushDate1 >= 18) && (pushDate1 < 24)) {
              pushDate1 -= 18;
            }
            else if ((pushDate1 == 24) || (pushDate1 == 0)) {
              pushDate1 = 6;
            }
            else if ((pushDate1 > 0) && (pushDate1 < 18)) {
              pushDate1 += 6;
            }

            if ((pushDropdown >= 18) && (pushDropdown < 24)) {
              pushDropdown -= 18;
            }
            else if ((pushDropdown == 24) || (pushDropdown == 0)) {
              pushDropdown = 6;
            }
            else if ((pushDropdown > 0) && (pushDropdown < 18)) {
              pushDropdown += 6;
            }

            if ((pushDate2 >= 18) && (pushDate2 < 24)) {
              pushDate2 -= 18;
            }
            else if ((pushDate2 == 24) || (pushDate2 == 0)) {
              pushDate2 = 6;
            }
            else if ((pushDate2 > 0) && (pushDate2 < 18)) {
              pushDate2 += 6;
            }

            if (firstTime) {
              date1Hi = pushDate1;
              dropdownHi = pushDropdown;
              date2Hi = pushDate2;
              date1Lo = pushDate1;
              dropdownLo = pushDropdown;
              date2Lo = pushDate2;
              firstTime = false;
            }
            else { // determine highest and lowest hours (range) for graph #3
              if (pushDate1 >= date1Hi) date1Hi = pushDate1;
              if (pushDropdown >= dropdownHi) date1Hi = pushDropdown;
              if (pushDate2 >= date2Hi) date2Hi = pushDate2;
              if (pushDate1 <= date1Lo) date1Hi = pushDate1;
              if (pushDropdown <= dropdownLo) dropdownLo = pushDropdown;
              if (pushDate2 <= date2Lo) date2Lo = pushDate2;
            }

            datapointaryTime2.push(pushDate1);
            datapointaryDropdown.push(pushDropdown);
            datapointaryTime.push(pushDate2);
            datapointaryDropdown4.push(window.sortedDates[i].Dropdown4);
          }
        }

        // console.log('date1Hi: ' + date1Hi + ' dropdownHi: ' + dropdownHi + ' date2Hi: ' + date2Hi + ' date1Lo: ' + date1Lo + ' dropdownLo: ' + dropdownLo + ' date2Lo: ' + date2Lo);

        var hiPoint = 0;
        var loPoint = 0;

        if ((date1Hi >= dropdownHi) && (date1Hi >= date2Hi)) hiPoint = date1Hi; // determine high and low ranges for graph #3
        else if ((date2Hi >= dropdownHi) && (date2Hi >= date1Hi)) hiPoint = date2Hi;
        else if ((dropdownHi >= date1Hi) && (dropdownHi >= date2Hi)) hiPoint = dropdownHi;
        if ((date1Lo <= dropdownLo) && (date1Lo <= date2Lo)) loPoint = date1Lo;
        else if ((date2Lo <= dropdownLo) && (date2Lo <= date1Lo)) loPoint = date2Lo;
        else if ((dropdownLo <= date1Lo) && (dropdownLo <= date2Lo)) loPoint = dropdownLo;

        // console.log('hiPoint: ' + hiPoint + ' loPoint: ' + loPoint);

        // Calculate averages

        var sum = 0;
        var count = 0;

        for (i in datapointaryH) {
          sum += parseFloat(datapointaryH[i]);
          count++;
        }

        timeInBedAvg = parseFloat(parseFloat(sum / count)).toFixed(1);

        sum = 0;
        count = 0;

        for (i in datapointaryL) {
          sum += parseFloat(datapointaryL[i]);
          count++;
        }

        timeAsleepAvg = parseFloat(parseFloat(sum / count)).toFixed(1);

        sum = 0;
        count = 0;

        for (i in datapointaryM) {
          sum += parseFloat(datapointaryM[i]);
          count++;
        }

        sleepEfficiencyAvg = Math.round(sum / count);

        var barChart1Data = {
          labels: dateary,
          datasets: [{
            label: 'Time In Bed (Avg = ' + timeInBedAvg + ' hours)',
            backgroundColor: "rgba(25,25,255,1)",
            strokeColor: "rgba(25,25,255,1)",
            pointColor: "rgba(25,25,255,1)",
            fill: false,


            data: datapointaryH
          },{
            label: 'Time Asleep (Avg = ' + timeAsleepAvg + ' hours)',
            backgroundColor: "rgba(255,25,25,1)",
            fill: false,


            data: datapointaryL
          }]
        };

        var barChart2Data = {
          labels: dateary,
          datasets: [{
            label: 'Sleep Efficiency (Avg = ' + sleepEfficiencyAvg + '%)',
            fill: false,
            backgroundColor: "rgba(25,255,25,1)",
            data: datapointaryM
          },{
            label: '85% Standard',
            fill: false,
            backgroundColor: "rgba(25,25,255,1)",
            data: datapointaryStd
          }]
        };

        var barChart3Data = {
          labels: dateary,
          datasets: [{
            label: 'Fell Asleep',
            backgroundColor: "rgba(255,25,25,1)",
            fill: false,
            data: datapointaryDropdown
          },{
            label: 'Lights Out',
            backgroundColor: "rgba(25,255,25,1)",
            fill: false,
            data: datapointaryTime2
          },{
            label: 'Went to Bed',
            backgroundColor: "rgba(25,25,255,1)",
            fill: false,
            data: datapointaryTime
          }]
        };

        var barChart4Data = {
          labels: dateary,
          datasets: [{
            label: 'Minutes Awake in the Night',
            backgroundColor: "rgba(255,25,25,1)",
            fill: false,
            data: datapointaryDropdown4
          }]
        };    



        var ctx = document.getElementById("linechart1").getContext("2d");

        window.myBar = new Chart(ctx, {
          type: 'line',
          responsive: true,
          pointDotRadius: 10,
          data: barChart1Data,
          options: {

            rectangle: {
              borderWidth: 1,
              borderColor: 'rgb(0,0,0)',
              borderSkipped: 'bottom'
            },
            responsive: true,
            legend: {
              position: 'bottom',
            },
            title: {
              display: false,
              text: 'Sleep Summary'
            }

          }
        });

        var ctx = document.getElementById("linechart2").getContext("2d");
        window.myBar = new Chart(ctx, {
          type: 'line',
          responsive: true,
          data: barChart2Data,
          options: {

            rectangle: {
              borderWidth: 1,
              borderColor: 'rgb(0,0,0)',
              borderSkipped: 'bottom'
            },
            responsive: true,
            legend: {
              position: 'bottom',
            },
            title: {
              display: false,
              text: 'Sleep Efficiency'
            }
          }

        });


        var ctx = document.getElementById("linechart3").getContext("2d");
        window.myBar = new Chart(ctx, {
          type: 'line',
          responsive: true,
          data: barChart3Data,
          options: {
            scales: {
              yAxes: [{
                ticks: {
                  // Create hour labels labels
                  callback: function(value, index, values) {

                    if ((pushDate1 >= 18) && (pushDate1 < 24)) {
                      pushDate1 -= 18;
                    }
                    else if ((pushDate1 == 24) || (pushDate1 == 0)) {
                      pushDate1 = 6;
                    }
                    else if ((pushDate1 > 0) && (pushDate1 < 18)) {
                      pushDate1 += 6;
                    }

                    if ((value >= 0) && (value < 6)) {
                      value = (value + 6) + "PM";
                    }
                    else if (value == 6) {
                      value = "12AM";
                    }
                    else if ((value > 6) && (value < 18)) {
                      value = (value - 6) + "AM";
                    }
                    else if ((value >= 18) && (value < 24)) {
                      if ((value - 6) > 12) { value -= 12; } 
                      value = (value - 6) + "PM";                
                    }

                    return value;
                  },
                  max: hiPoint + 2,
                  min: loPoint - 1,
                  stepSize: 1
                }
              }]
            },
            rectangle: {
              borderWidth: 1,
              borderColor: 'rgb(0,0,0)',
              borderSkipped: 'bottom'
            },
            responsive: true,
            legend: {
              position: 'bottom',
            },
            title: {
              display: false,
              text: 'Falling Asleep (Hours)'
            }
          }
        });


        var ctx = document.getElementById("linechart4").getContext("2d");


        window.myBar = new Chart(ctx, {
          type: 'line',
          pointDotRadius: 6,
          responsive: true,
          data: barChart4Data,
          options: {

            rectangle: {
              borderWidth: 1,
              borderColor: 'rgb(0,0,0)',
              borderSkipped: 'bottom'
            },
            responsive: true,
            legend: {
              position: 'bottom',
            },
            title: {
              display: false,
              text: 'Minutes Awake in the Night'
            }
          }

        });
      };

      function populateTable(){
        $('#list li').remove();
        $('#list').html(''); //for empty div

        var dateary = [];
        var datapointaryH = [];
        var datapointaryL = [];
        var datapointaryM = [];
        var datapointaryStd = [];
        var datapointaryTime2 = [];
        var datapointaryDropdown = [];
        var datapointaryTime = [];
        var datapointaryDropdown4 = [];

        var step = 7;
        
        window.sortedDates = [];
        getSortedDates();

        var hash = window.location.hash.substr(1);
        var beginPoint = 0; // determine starting point to attempt to ensure as many data entries on graph as possible
        if ((sortedDates.length - 1) < graphWidth) {
          beginPoint = 0;
        }
        else {
          var j = 0;
          for (i = sortedDates.length - 1; i >= 0; i--) {
            if ((i < hash)) {
              if (hash - graphWidth >= 0) {
                beginPoint = i;
                j++;
                if (j >= graphWidth - 1) // check for number of entries displayed on graph/table based on dropdown
                  break;
              }
            }
          }
        }

        $('#list').append("<li><strong>Time In Bed (Avg = " + timeInBedAvg + " hours)</strong></li>");

        for (i = 0; i < sortedDates.length; i++) {
          if ((i >= beginPoint) && (i < beginPoint + graphWidth)) {
            $('#list').append("<li><strong>"+window.sortedDates[i].Date+" </strong><span>"+window.sortedDates[i].datapointH+" Minutes</span></li>");
          }
        }

        $('#list').append("<li><strong>Time Asleep (Avg = " + timeAsleepAvg + " hours)</strong></li>");

        for (i = 0; i < sortedDates.length; i++) {
          if ((i >= beginPoint) && (i < beginPoint + graphWidth)) {
            $('#list').append("<li><strong>"+window.sortedDates[i].Date+" </strong><span>"+window.sortedDates[i].datapointL+" Minutes</span></li>");
          }
        }

        $('#list').append("<li><strong>Sleep Efficiency (Avg = " + sleepEfficiencyAvg + "%)</strong></li>");

        for (i = 0; i < sortedDates.length; i++) {
          if ((i >= beginPoint) && (i < beginPoint + graphWidth)) {
            $('#list').append("<li><strong>"+window.sortedDates[i].Date+" </strong><span>"+window.sortedDates[i].datapointM+"%</span></li>");
          }
        }

        $('#list').append("<li><strong>Fell Asleep (After Going to Bed)</strong></li>");

        for (i = 0; i < sortedDates.length; i++) {
          if ((i >= beginPoint) && (i < beginPoint + graphWidth)) {
            $('#list').append("<li><strong>"+window.sortedDates[i].Date+" </strong><span>"+window.sortedDates[i].Dropdown+" Minutes</span></li>");
          }
        }

        $('#list').append("<li><strong>Lights Out</strong></li>");

        for (i = 0; i < sortedDates.length; i++) {
          if ((i >= beginPoint) && (i < beginPoint + graphWidth)) {
            $('#list').append("<li><strong>"+window.sortedDates[i].Date+" </strong><span>"+window.sortedDates[i].Time2+"</span></li>");
          }
        }

        $('#list').append("<li><strong>Went to Bed</strong></li>");

        for (i = 0; i < sortedDates.length; i++) {
          if ((i >= beginPoint) && (i < beginPoint + graphWidth)) {
            $('#list').append("<li><strong>"+window.sortedDates[i].Date+" </strong><span>"+window.sortedDates[i].Time+"</span></li>");
          }
        }

        $('#list').append("<li><strong>Minutes Awake in the Night</strong></li>");

        for (i = 0; i < sortedDates.length; i++) {
          if ((i >= beginPoint) && (i < beginPoint + graphWidth)) {
            $('#list').append("<li><strong>"+window.sortedDates[i].Date+" </strong><span>"+window.sortedDates[i].Dropdown4+" Minutes</span></li>");
          }
        }

      };

    </script>

    <script type="text/javascript" src="js/slide-range.js"></script>
    <script type="text/javascript" src="js/tab5.js"></script>

    <script type="text/javascript" src="js/functions.js"></script><script type="text/javascript" src="js/cookies.js"></script>
    <script type="text/javascript" src="js/downloadcsv.js"></script>

    <style type="text/css">

      #AT > label {
        font-size: 0.7em;
      }

      .calendarlist{
        margin-top: 15px;
        border: 1px solid #ccc;
        list-style-type: none;
        padding-left: 0px;
      }
      .calendarlist li{
        width: 100%;
        border-bottom: 1px solid #ccc;
        position: relative;
        padding: 6px;
      }
      .calendarlist li strong:nth-child(1), .calendarlist li strong:nth-child(2){
        position: relative;
        display: inline-block;
        width: 40%;
      }
      .calendarlist li strong:nth-child(3){
        position: relative;
        display: inline-block;
        width: 20%;
      }

      .calendarlist li span:nth-child(1),.calendarlist li span:nth-child(2){
        position: relative;
        display: inline-block;
        width: 40%;
      }
      .calendarlist li span:nth-child(3){
        position: relative;
        display: inline-block;
        width: 20%;
      }

    </style>

  </body>
</html>
